---
title: Solution Interactions
keywords: engage, about
tags: [overview]
sidebar: overview_sidebar
permalink: solution_interactions.html
toc: true
summary: Solution interactions
---

{% include important.html content="This site is under active development by NHS Digital and is intended to provide all the technical resources you need to successfully develop the CDS API. This project is being developed using an agile methodology so iterative updates to content will be added on a regular basis." %}


## Interactions ##

The key interactions for the Clinical Decision Support API are represented in the diagrams below.

### Get ServiceDefinition###
`Q: Should we have a diagram here showing the EMS > CDSS Get Service Definition, before user invokes a CDSS?`
`Q: Confirm correct use of back ticks - when to highlight resources, elements etc`
`TODO - Compress images`

View the [Get ServiceDefinition](/api_get_service_definition.html) section for detailed guidance.

### POST ServiceDefinition ###

The interaction below illustrates the User input to the EMS invoking a CDSS. 
The EMS performs a POST `ServiceDefinition` operation to the CDSS requesting CDS guidance from the selected CDSS.

The $evaluate operation has a number of parameters. Of particular note is the `inputData` element. The EMS will populate this element with all assertions collected in a particular triage journey and any other assertions considered to be of relevance.

The CDSS is obliged to consider anything carried in the `ServiceDefinition` `dataRequirement` element in order to decide the content of the `GuidanceResponse`.

View the [POST ServiceDefinition](/api_post_service_definition.html) section for detailed guidance.


### GuidanceResponse ###

The CDSS will return a `GuidanceResponse` resource as the OUT parameter of the `ServiceDefinition` evaluate operation and is the primary message generated by the CDSS. The `GuidanceResponse` provides a container for the status of the response, any warnings or messages returned by the service, as well as the output data of the module and any suggested actions to be performed.

The `GuidanceResponse` resource returned here contains a relevant question within the `dataRequirements` element, carried by a referenced `Questionnaire` resource.

View the [GuidanceResponse](/api_guidance_response.html) section for detailed guidance.
[![Diagram showing UEC Digital Integration Programme invoke decision support interaction](images/solution/invoke-decision-support.png)](/api_get_service_definition.html)


### Get questionnaire ###

<!-- As a response to a `ServiceDefinition` evaluate operation to request clinical support guidance, a selected CDSS returns a `GuidanceResponse` resource to the EMS. -->

The EMS will get the Questionnaire resource returned by the CDSS, using as a parameter the returned `id` of the Questionnaire.
The EMS only accepts a single question within the questionnaire response.  

View the [Get Questionnaire](/api_get_questionnaire.html) section for more information.
![Diagram showing UEC Digital Integration Programme get questionnaire interaction](images/solution/get-questionnaire.png)

### Ask question ###
The EMS presents the question and responses from the CDSS to the user. The user responds to the question via the EMS.

<!-- View the [Get Questionnaire](/api_get_questionnaire.html) section for more information. `This link is about getting the questionnaire rather than asking the question` -->

![Diagram showing UEC Digital Integration Programme ask question interaction](images/solution/ask-question.png)

### ServiceDefinition.$evaluate including response###
The EMS logs the response to the first question and submits another `ServiceDefinition`.$evaluate request which includes the answer to the first question.

The CDSS asserts the observation as submitted by the user. In this example, a decision is then returned for a second question to be answered.
 
The returned `GuidanceResponse` now has the asserted observation answer, and the next question for the EMS to display which is within the `dataRequirements` element.

The EMS logs the assertion recieved as part of the `GuidanceResponse`.

View the [Post ServiceDefinition](/api_post_service_definition.html) and [GuidanceResponse](/api_guidance_response.html) sections for more information.
![Diagram showing UEC Digital Integration Programme servicedefinition evaluate response interaction](images/solution/servicedefinition-evaluate-response.png)

### Get questionnaire ###

The first question and answer have been evaluated and the CDSS has responded with an `id` of a second question. 

The EMS sends a request to retrieve the Questionnaire resource for the second question and the CDSS returns the Question.

View the [Get Questionnaire](/api_get_questionnaire.html) section for more information.
![Diagram showing UEC Digital Integration Programme get questionnaire interaction](images/solution/get-questionnaire.png)

### Ask question ###
The EMS presents the second question from the CDSS to the user and the user responds to the question via the EMS.

View the [Get ServiceDefinition](/api_get_service_definition.html) section for more information.
![Diagram showing UEC Digital Integration Programme ask question interaction](images/solution/ask-question.png)

### ServiceDefinition.$evaluate including observation resource and response###
The EMS logs the response and again returns a `ServiceDefinition`.$evaluate resource containing the response and the previous assertion for the CDSS to evaluate.

The CDSS creates another assertion from the questionnaire response and determines a result can be provided.

The GuidanceResponse.result can contain up to three different concepts:

* a recommendation for where the patient should go next
* care advice for the patient (or 3rd party) on actions that can be performed now to either assist the patient, or to assist the triage process
* a recommendation to redirect to a different Service Definition

View the [Triage Recommendation](/api_referral_request.html), [Care Advice Recommendation](/api_care_plan.html) and [Redirect  ServiceDefinition](api_redirect_service_definition.html) sections for more information.
![Diagram showing UEC Digital Integration Programme servicedefinition evaluate response assertion interaction](images/solution/servicedefinition-evaluate-response-assertion.png)

### Display result ###
The EMS displays the result to the User.

![Diagram showing UEC Digital Integration Programme display result interaction](images/solution/display-result.png)
